<div class="card shadow-sm p-4">
    <div class="d-flex flex-wrap justify-content-between align-items-center mb-4 gap-3">
        <h2 class="h4 mb-0">Club Members</h2>

        <mat-form-field appearance="outline" class="flex-grow-1" style="max-width: 250px;">
            <mat-label>Search</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Filter by name or email" />
        </mat-form-field>
    </div>

    <div class="table-responsive">
        <table mat-table [dataSource]="dataSource" matSort class="table table-hover align-middle text-nowrap">

            <!-- Profile Picture -->
            <ng-container matColumnDef="profilePicture">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let member">
                    <img [src]="member.profilePicture?.url" alt="Profile" width="40" class="rounded-circle" />
                </td>
            </ng-container>

            <!-- First/Last Name -->
            <ng-container matColumnDef="firstName">
                <th mat-header-cell *matHeaderCellDef class="custom-header" mat-sort-header>First</th>
                <td mat-cell *matCellDef="let m">{{ m.firstName }}</td>
            </ng-container>

            <ng-container matColumnDef="lastName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Last</th>
                <td mat-cell *matCellDef="let m">{{ m.lastName }}</td>
            </ng-container>

            <!-- Email -->
            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef>Email</th>
                <td mat-cell *matCellDef="let m">{{ m.email }}</td>
            </ng-container>

            <!-- Age -->
            <ng-container matColumnDef="age">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Age</th>
                <td mat-cell *matCellDef="let m">{{ m.age }}</td>
            </ng-container>

            <!-- Coach -->
            <ng-container matColumnDef="isCoach">
                <th mat-header-cell *matHeaderCellDef>Coach</th>
                <td mat-cell *matCellDef="let m">
                    <span class="badge bg-success" *ngIf="m.isCoach">✔️</span>
                </td>
            </ng-container>

            <!-- Active -->
            <ng-container matColumnDef="isActive">
                <th mat-header-cell *matHeaderCellDef>Active</th>
                <td mat-cell *matCellDef="let m">
                    <span class="badge" [ngClass]="m.isActive ? 'bg-success' : 'bg-danger'">
                        {{ m.isActive ? '✔ Active' : '✖ Inactive' }}
                    </span>
                </td>
            </ng-container>

            <!-- Height & Weight -->
            <ng-container matColumnDef="height">
                <th mat-header-cell *matHeaderCellDef>Height</th>
                <td mat-cell *matCellDef="let m">{{ m.height }} cm</td>
            </ng-container>

            <ng-container matColumnDef="weight">
                <th mat-header-cell *matHeaderCellDef>Weight</th>
                <td mat-cell *matCellDef="let m">{{ m.weight }} kg</td>
            </ng-container>

            <!-- Started On -->
            <ng-container matColumnDef="startedOn">
                <th mat-header-cell *matHeaderCellDef>Joined</th>
                <td mat-cell *matCellDef="let m">{{ m.startedOn | date }}</td>
            </ng-container>

            <!-- Actions -->
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let m">
                    <button mat-icon-button color="primary" class="me-2">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button class="text-danger">
                        <mat-icon>delete</mat-icon>
                    </button>
                </td>
            </ng-container>

            <!-- Table Rows -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="custom-header"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>

    <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons class="mt-3 bg-primary"></mat-paginator>
</div>